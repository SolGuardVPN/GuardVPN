<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DVPN Client</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Subscription Code Entry Modal -->
  <div id="codeEntryModal" style="display: flex; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%); align-items: center; justify-content: center; z-index: 10000;">
    <div style="max-width: 500px; width: 90%; background: #2a2a2a; border-radius: 16px; padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.5); border: 1px solid #444;">
      <div style="text-align: center; margin-bottom: 30px;">
        <div style="font-size: 64px; margin-bottom: 20px;">üîê</div>
        <h2 style="color: #00d4aa; margin: 0 0 10px 0; font-size: 28px;">Welcome to DVPN</h2>
        <p style="color: #a0a0a0; font-size: 14px; margin: 0;">Enter your subscription code to access the VPN</p>
      </div>
      
      <div style="margin: 30px 0;">
        <label style="display: block; color: #e0e0e0; font-weight: 600; margin-bottom: 10px;">Subscription Code</label>
        <input 
          type="text" 
          id="subscriptionCodeInput" 
          placeholder="DVPN-M-XXXXXX-XXXX" 
          style="width: 100%; padding: 15px; background: #1a1a1a; border: 2px solid #444; border-radius: 8px; color: #e0e0e0; font-size: 16px; font-family: monospace; letter-spacing: 1px; box-sizing: border-box;"
          onkeypress="if(event.key === 'Enter') document.getElementById('enterCodeBtn').click()"
        />
      </div>
      
      <button 
        id="enterCodeBtn" 
        style="width: 100%; padding: 15px; background: linear-gradient(135deg, #00d4aa 0%, #00a88e 100%); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; margin-bottom: 15px;">
        üöÄ Activate Subscription
      </button>
      
      <div style="display: flex; gap: 10px; margin-top: 15px;">
        <button 
          id="buySubscriptionBtn" 
          style="flex: 1; padding: 12px; background: #444; color: #e0e0e0; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer;">
          üí≥ Buy Subscription
        </button>
        <button 
          id="skipCodeBtn" 
          style="flex: 1; padding: 12px; background: transparent; color: #a0a0a0; border: 1px solid #444; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer;">
          ‚è≠Ô∏è Skip for Now
        </button>
      </div>
      
      <div style="margin-top: 25px; padding: 15px; background: rgba(0, 212, 170, 0.1); border-left: 4px solid #00d4aa; border-radius: 4px;">
        <div style="color: #00d4aa; font-weight: 600; margin-bottom: 5px;">üí° Don't have a code?</div>
        <p style="color: #e0e0e0; font-size: 13px; margin: 5px 0;">Click "Buy Subscription" to purchase a monthly ($30) or yearly ($150) plan and get instant access.</p>
      </div>
    </div>
  </div>

  <!-- Main App Container -->
  <div id="mainApp" class="app-container" style="display: block;">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <svg width="32" height="32" viewBox="0 0 32 32">
          <circle cx="16" cy="16" r="14" fill="none" stroke="#00d4aa" stroke-width="2"/>
          <path d="M16 8 L16 24 M8 16 L24 16" stroke="#00d4aa" stroke-width="2"/>
        </svg>
        <h1>DVPN</h1>
      </div>
      <div class="wallet-section">
        <button id="connectWalletBtn" class="btn btn-primary">Connect Wallet</button>
        <div id="walletInfo" class="wallet-info" style="display: none;">
          <span id="walletAddress"></span>
          <span id="walletBalance"></span>
        </div>
      </div>
    </header>

    <!-- Testnet Warning Banner -->
    <div class="testnet-banner" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 20px; text-align: center; font-size: 14px; border-bottom: 2px solid #5a67d8; display: flex; align-items: center; justify-content: center; gap: 10px;">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" style="flex-shrink: 0;">
        <path d="M10 2a8 8 0 100 16 8 8 0 000-16zm1 11H9v-2h2v2zm0-4H9V5h2v4z"/>
      </svg>
      <div style="text-align: left;">
        <strong>üß™ TESTNET MODE</strong> - This app uses Solana Testnet. 
        <span style="opacity: 0.9;">Testnet SOL is FREE for testing (not real money). Get free testnet SOL from: 
        <a href="https://faucet.solana.com" target="_blank" style="color: #ffd700; text-decoration: underline;">faucet.solana.com</a></span>
      </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Connection Status -->
      <section class="status-card">
        <div class="status-indicator" id="statusIndicator">
          <div class="status-dot disconnected"></div>
          <span id="statusText">Disconnected</span>
        </div>
        
        <!-- Subscription Type Selector -->
        <div class="subscription-selector" style="margin: 20px 0;">
          <label style="display: block; margin-bottom: 10px; font-weight: 600;">Payment Plan:</label>
          <div class="subscription-options" style="display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
            <button class="subscription-option active" data-type="hourly" style="flex: 1; min-width: 120px; padding: 12px; border: 2px solid #00d4aa; border-radius: 8px; background: rgba(0, 212, 170, 0.1); color: #00d4aa; font-weight: 600; cursor: pointer;">
              ‚è±Ô∏è Hourly<br><small style="opacity: 0.8;">Pay as you go</small>
            </button>
            <button class="subscription-option" data-type="monthly" style="flex: 1; min-width: 120px; padding: 12px; border: 2px solid #444; border-radius: 8px; background: transparent; color: #e0e0e0; font-weight: 600; cursor: pointer;">
              üìÖ Monthly<br><small style="opacity: 0.8;">30 days unlimited</small>
            </button>
            <button class="subscription-option" data-type="yearly" style="flex: 1; min-width: 120px; padding: 12px; border: 2px solid #444; border-radius: 8px; background: transparent; color: #e0e0e0; font-weight: 600; cursor: pointer;">
              üéâ Yearly<br><small style="opacity: 0.8;">365 days - Save 20%</small>
            </button>
          </div>
        </div>
        
        <button id="connectBtn" class="btn btn-large btn-connect" disabled>
          Connect to VPN
        </button>
        
        <!-- Subscription Info -->
        <div id="subscriptionInfo" style="display: none; margin-top: 15px; padding: 12px; background: rgba(0, 212, 170, 0.1); border-radius: 8px; border: 1px solid #00d4aa;">
          <div style="font-weight: 600; margin-bottom: 5px;">üé´ Active Subscription</div>
          <div id="subscriptionDetails" style="font-size: 14px; opacity: 0.9;"></div>
        </div>
        
        <div id="connectionDetails" style="display: none;">
          <div class="detail-row">
            <span class="label">Node:</span>
            <span id="connectedNode">-</span>
          </div>
          <div class="detail-row">
            <span class="label">Region:</span>
            <span id="connectedRegion">-</span>
          </div>
          <div class="detail-row">
            <span class="label">Session:</span>
            <span id="sessionId">-</span>
          </div>
          <div class="detail-row">
            <span class="label">Time Remaining:</span>
            <span id="timeRemaining">-</span>
          </div>
        </div>
      </section>

      <!-- Node Selection -->
      <section class="nodes-section">
        <div class="section-header">
          <h2>Available Nodes</h2>
          <div class="filters">
            <select id="regionFilter" class="filter-select">
              <option value="">All Regions</option>
              <option value="us-east">US East</option>
              <option value="us-west">US West</option>
              <option value="eu-west">EU West</option>
              <option value="asia">Asia</option>
            </select>
            <button id="refreshNodesBtn" class="btn btn-secondary">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>
                <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>
              </svg>
              Refresh
            </button>
          </div>
        </div>
        <div id="nodesContainer" class="nodes-grid">
          <div class="loading">Loading nodes...</div>
        </div>
      </section>

      <!-- Sessions Tab -->
      <section class="sessions-section" style="display: none;">
        <h2>My Sessions</h2>
        <div id="sessionsContainer" class="sessions-list">
          <!-- Sessions will be populated here -->
        </div>
      </section>

      <!-- Settings Tab -->
      <section class="settings-section" style="display: none;">
        <h2>Settings</h2>
        <div class="settings-form">
          <div class="form-group">
            <label for="indexerUrl">Indexer URL:</label>
            <input type="text" id="indexerUrl" value="http://localhost:8080" class="input">
          </div>
          <div class="form-group">
            <label for="rpcUrl">Solana RPC URL:</label>
            <input type="text" id="rpcUrl" value="http://localhost:8899" class="input">
          </div>
          <div class="form-group">
            <label for="programId">Program ID:</label>
            <input type="text" id="programId" value="8LQKwvHJPdK6fKmopXmUwct8JjVGQhf3RFQd64nCV39i" class="input">
          </div>
          <button id="saveSettingsBtn" class="btn btn-primary">Save Settings</button>
        </div>
      </section>
    </main>

    <!-- Navigation -->
    <nav class="bottom-nav">
      <button class="nav-item active" data-tab="nodes">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <circle cx="10" cy="10" r="8"/>
        </svg>
        Nodes
      </button>
      <button class="nav-item" data-tab="sessions">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <rect x="2" y="4" width="16" height="12" rx="2"/>
        </svg>
        Sessions
      </button>
      <button class="nav-item" data-tab="settings">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <circle cx="10" cy="10" r="2"/>
          <path d="M10 2L12 6L16 6L13 9L14 13L10 11L6 13L7 9L4 6L8 6Z"/>
        </svg>
        Settings
      </button>
    </nav>
  </div>
  <!-- End Main App Container -->

  <!-- Modals -->
  <div id="modalOverlay" class="modal-overlay" style="display: none;">
    <div class="modal">
      <div class="modal-header">
        <h3 id="modalTitle">Modal Title</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body" id="modalBody">
        <!-- Dynamic content -->
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="modalCancelBtn">Cancel</button>
        <button class="btn btn-primary" id="modalConfirmBtn">Confirm</button>
      </div>
    </div>
  </div>

  <!-- Solana Web3.js Library -->
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
  
  <script src="renderer.js"></script>
</body>
</html>
