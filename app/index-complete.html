<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Guard VPN - Decentralized</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-container">
    <!-- Sidebar (Hidden on Onboarding/Subscription screens) -->
    <aside class="sidebar">
      <div class="logo-container">
        <div class="logo-icon">
          <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
            <rect width="40" height="40" rx="8" fill="#00D4AA"/>
            <path d="M20 10 L20 18 L28 22 L20 30 L12 22 L20 18 Z" stroke="#0A0A0A" stroke-width="2" fill="none"/>
          </svg>
        </div>
        <span class="logo-text">Guard VPN</span>
      </div>
      
      <nav class="nav-menu">
        <a href="#" class="nav-item active" data-tab="home">
          <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
          </svg>
          <span class="nav-text">Home</span>
        </a>
        <a href="#" class="nav-item" data-tab="sessions">
          <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
          <span class="nav-text">Sessions</span>
        </a>
        <a href="#" class="nav-item" data-tab="settings">
          <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M12 1v6m0 6v6M1 12h6m6 0h6"></path>
          </svg>
          <span class="nav-text">Settings</span>
        </a>
        <a href="#" class="nav-item" data-tab="provider">
          <svg class="nav-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect>
            <rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect>
            <line x1="6" y1="6" x2="6.01" y2="6"></line>
            <line x1="6" y1="18" x2="6.01" y2="18"></line>
          </svg>
          <span class="nav-text">Provider</span>
        </a>
      </nav>

      <div class="wallet-info-sidebar">
        <div class="wallet-label">Wallet</div>
        <div class="wallet-address" id="sidebarWalletAddress">Not Connected</div>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content-wrapper">
      <!-- Onboarding Tab -->
      <div id="onboardingTab" class="tab-content active">
        <div class="onboarding-container">
          <div class="welcome-header">
            <div class="welcome-logo">
              <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
                <rect width="80" height="80" rx="16" fill="#00D4AA"/>
                <path d="M40 20 L40 36 L56 44 L40 60 L24 44 L40 36 Z" stroke="#0A0A0A" stroke-width="3" fill="none"/>
              </svg>
            </div>
            <h1 class="welcome-title">Welcome to Guard VPN</h1>
            <p class="welcome-subtitle">Connect your wallet to get started</p>
          </div>
          
          <div class="wallet-options">
            <button class="wallet-option-card" id="connectPhantomBtn">
              <div class="wallet-option-icon phantom-icon">
                <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                  <rect width="48" height="48" rx="12" fill="#AB9FF2"/>
                  <path d="M24 14L24 20L30 23L24 32L18 23L24 20Z" stroke="white" stroke-width="2" fill="none"/>
                </svg>
              </div>
              <div class="wallet-option-info">
                <div class="wallet-option-title">Phantom Wallet</div>
                <div class="wallet-option-desc">Connect with Phantom</div>
              </div>
            </button>
            
            <button class="wallet-option-card" id="useMockWalletBtn">
              <div class="wallet-option-icon dev-icon">
                <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                  <rect width="48" height="48" rx="12" fill="#00D4AA"/>
                  <path d="M24 16v16M16 24h16" stroke="#0A0A0A" stroke-width="3"/>
                </svg>
              </div>
              <div class="wallet-option-info">
                <div class="wallet-option-title">Dev Mode</div>
                <div class="wallet-option-desc">Use mock wallet for testing</div>
              </div>
            </button>
          </div>
        </div>
      </div>

      <!-- Subscription Tab -->
      <div id="subscriptionTab" class="tab-content">
        <div class="subscription-container">
          <div class="subscription-header">
            <h1 class="subscription-title">Choose Your Plan</h1>
            <p class="subscription-subtitle">Select the subscription that works best for you</p>
          </div>
          
          <div class="plans-grid">
            <div class="plan-card">
              <div class="plan-icon">‚è±Ô∏è</div>
              <div class="plan-name">Hourly</div>
              <div class="plan-price">0.01 SOL<span class="plan-period">/hour</span></div>
              <ul class="plan-features">
                <li>‚úì Full speed access</li>
                <li>‚úì All server locations</li>
                <li>‚úì Pay as you go</li>
              </ul>
              <button class="btn-plan" onclick="selectPlan('hourly', 0.01)">Select Plan</button>
            </div>
            
            <div class="plan-card plan-recommended">
              <div class="plan-badge">RECOMMENDED</div>
              <div class="plan-icon">üìÖ</div>
              <div class="plan-name">Weekly</div>
              <div class="plan-price">0.05 SOL<span class="plan-period">/week</span></div>
              <ul class="plan-features">
                <li>‚úì Full speed access</li>
                <li>‚úì All server locations</li>
                <li>‚úì Save 30%</li>
                <li>‚úì Priority support</li>
              </ul>
              <button class="btn-plan" onclick="selectPlan('weekly', 0.05)">Select Plan</button>
            </div>
            
            <div class="plan-card">
              <div class="plan-icon">üìÜ</div>
              <div class="plan-name">Monthly</div>
              <div class="plan-price">0.15 SOL<span class="plan-period">/month</span></div>
              <ul class="plan-features">
                <li>‚úì Full speed access</li>
                <li>‚úì All server locations</li>
                <li>‚úì Save 50%</li>
                <li>‚úì Priority support</li>
                <li>‚úì No session limits</li>
              </ul>
              <button class="btn-plan" onclick="selectPlan('monthly', 0.15)">Select Plan</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Home Tab -->
      <div id="homeTab" class="tab-content main-dashboard">
        <!-- Left Panel - Locations -->
        <div class="locations-panel">
          <div class="search-container">
            <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
            <input type="text" id="searchLocation" placeholder="Search location" class="search-input">
          </div>
          
          <div class="locations-header">All Locations</div>
          
          <div class="locations-list" id="locationsList">
            <!-- Locations will be populated dynamically -->
          </div>
        </div>

        <!-- Center Panel - Map -->
        <div class="map-panel">
          <div class="map-background">
            <canvas id="mapCanvas" class="world-map-canvas"></canvas>
            
            <div class="connection-indicator" id="connectionIndicator">
              <div class="client-marker" id="clientMarker">
                <div class="marker-pulse"></div>
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                  <circle cx="16" cy="16" r="16" fill="#00D4AA"/>
                  <path d="M16 8 L16 14 L22 17 L16 24 L10 17 L16 14 Z" stroke="#0A0A0A" stroke-width="1.5" fill="none"/>
                </svg>
              </div>
              
              <svg class="connection-line" id="connectionLine">
                <line x1="0" y1="0" x2="100" y2="100" stroke="#00D4AA" stroke-width="2" stroke-dasharray="8 4"/>
              </svg>
              
              <div class="server-marker" id="serverMarker">
                <div class="marker-pulse"></div>
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                  <circle cx="16" cy="16" r="16" fill="#00D4AA"/>
                  <rect x="10" y="12" width="12" height="3" fill="#0A0A0A" rx="1"/>
                  <rect x="10" y="17" width="12" height="3" fill="#0A0A0A" rx="1"/>
                  <circle cx="19" cy="13.5" r="0.8" fill="#00D4AA"/>
                  <circle cx="19" cy="18.5" r="0.8" fill="#00D4AA"/>
                </svg>
              </div>
              
              <div class="location-popup" id="locationPopup">
                <img class="popup-flag" id="popupFlag" src="" alt="">
                <div class="popup-info">
                  <div class="popup-country" id="popupCountry">United State</div>
                  <div class="popup-city" id="popupCity">New York</div>
                </div>
              </div>
            </div>
          </div>
          
          <button class="btn-premium" id="premiumBtn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
            Try Premium
          </button>
        </div>

        <!-- Right Panel - Connection -->
        <div class="connection-panel">
          <div class="current-location" id="currentLocationCard">
            <span class="location-flag" id="currentFlag">üá∫üá∏</span>
            <div class="location-info">
              <div class="location-country" id="currentCountry">United State</div>
              <div class="location-city" id="currentCity">New York, United States</div>
            </div>
            <svg class="location-arrow" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
          </div>
          
          <div class="timer" id="connectionTimer">00:00:00</div>
          
          <div class="connection-status" id="connectionStatus">
            <button class="status-circle disconnected" id="statusCircle">
              <svg class="power-icon" width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path>
                <line x1="12" y1="2" x2="12" y2="12"></line>
              </svg>
              <div class="status-text" id="statusText">Disconnected</div>
              <div class="status-ip" id="statusIp">Not Connected</div>
            </button>
          </div>
          
          <div class="speed-stats">
            <div class="speed-item">
              <svg class="speed-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#00D4AA" stroke-width="2">
                <path d="M12 5v14M19 12l-7 7-7-7"></path>
              </svg>
              <div class="speed-label">Download</div>
              <div class="speed-value" id="downloadSpeed">0 Mbps</div>
            </div>
            <div class="speed-item">
              <svg class="speed-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#00D4AA" stroke-width="2">
                <path d="M12 19V5M5 12l7-7 7 7"></path>
              </svg>
              <div class="speed-label">Upload</div>
              <div class="speed-value" id="uploadSpeed">0 Mbps</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Sessions Tab -->
      <div id="sessionsTab" class="tab-content">
        <div class="tab-with-sidebar">
          <div class="sidebar-placeholder"></div>
          <div class="tab-main-content">
            <div class="tab-header">
              <h2>Session History</h2>
              <button class="btn-refresh" id="refreshSessionsBtn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="23 4 23 10 17 10"></polyline>
                  <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
                </svg>
                Refresh
              </button>
            </div>
            
            <div class="sessions-list" id="sessionsList">
              <div class="empty-state">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#4A4A4A" stroke-width="1.5">
                  <circle cx="12" cy="12" r="10"></circle>
                  <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                <p>No session history yet</p>
                <small>Your VPN sessions will appear here</small>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Settings Tab -->
      <div id="settingsTab" class="tab-content">
        <div class="tab-with-sidebar">
          <div class="sidebar-placeholder"></div>
          <div class="tab-main-content">
            <div class="tab-header">
              <h2>Settings</h2>
            </div>
            
            <div class="settings-grid">
              <div class="settings-section">
                <h3 class="settings-section-title">Network Configuration</h3>
                
                <div class="form-group">
                  <label for="indexerUrl">Indexer URL</label>
                  <input type="text" id="indexerUrl" class="input-field" value="http://localhost:3001">
                  <small class="input-hint">API endpoint for node discovery</small>
                </div>
                
                <div class="form-group">
                  <label for="rpcUrl">Solana RPC URL</label>
                  <input type="text" id="rpcUrl" class="input-field" value="https://api.testnet.solana.com">
                  <small class="input-hint">Blockchain RPC endpoint</small>
                </div>
                
                <div class="form-group">
                  <label for="programId">Program ID</label>
                  <input type="text" id="programId" class="input-field" value="8LQKwvHJPdK6fKmopXmUwct8JjVGQhf3RFQd64nCV39i">
                  <small class="input-hint">Smart contract address</small>
                </div>
              </div>
              
              <div class="settings-section">
                <h3 class="settings-section-title">Wallet</h3>
                
                <div class="wallet-status-card">
                  <div class="wallet-status-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                      <line x1="1" y1="10" x2="23" y2="10"></line>
                    </svg>
                  </div>
                  <div class="wallet-status-info">
                    <div class="wallet-status-label">Connected Wallet</div>
                    <div class="wallet-status-address" id="settingsWalletAddress">Not Connected</div>
                  </div>
                  <button class="btn-secondary" id="connectWalletBtn">Connect</button>
                </div>
              </div>
              
              <div class="settings-actions">
                <button class="btn-primary" id="saveSettingsBtn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                    <polyline points="17 21 17 13 7 13 7 21"></polyline>
                    <polyline points="7 3 7 8 15 8"></polyline>
                  </svg>
                  Save Settings
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Provider Tab -->
      <div id="providerTab" class="tab-content">
        <div class="tab-with-sidebar">
          <div class="sidebar-placeholder"></div>
          <div class="tab-main-content">
            <div class="tab-header">
              <h2>Node Provider Dashboard</h2>
              <button class="btn-refresh" id="refreshProviderStatsBtn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="23 4 23 10 17 10"></polyline>
                  <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>
                </svg>
                Refresh
              </button>
            </div>
            
            <div class="provider-stats-grid">
              <div class="stat-card">
                <div class="stat-icon">üë•</div>
                <div class="stat-value" id="providerActiveUsers">0</div>
                <div class="stat-label">Active Users</div>
              </div>
              
              <div class="stat-card">
                <div class="stat-icon">üí∞</div>
                <div class="stat-value" id="providerEarnings">0 SOL</div>
                <div class="stat-label">Total Earnings</div>
              </div>
              
              <div class="stat-card">
                <div class="stat-icon">‚ö°</div>
                <div class="stat-value" id="providerUptime">0%</div>
                <div class="stat-label">Uptime</div>
              </div>
              
              <div class="stat-card">
                <div class="stat-icon">üìä</div>
                <div class="stat-value" id="providerSessions">0</div>
                <div class="stat-label">Total Sessions</div>
              </div>
            </div>
            
            <div class="provider-node-form">
              <h3 class="form-title">Register Your Node</h3>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="providerNodeLocation">Location</label>
                  <input type="text" id="providerNodeLocation" class="input-field" placeholder="e.g., New York, USA">
                </div>
                
                <div class="form-group">
                  <label for="providerNodeEndpoint">Endpoint (IP:Port)</label>
                  <input type="text" id="providerNodeEndpoint" class="input-field" placeholder="e.g., 192.168.1.100:51820">
                </div>
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="providerNodePrice">Price (SOL/hour)</label>
                  <input type="number" id="providerNodePrice" class="input-field" placeholder="0.01" step="0.01" min="0">
                </div>
                
                <div class="form-group">
                  <label for="providerNodePubkey">WireGuard Public Key</label>
                  <input type="text" id="providerNodePubkey" class="input-field" placeholder="Your WireGuard public key">
                </div>
              </div>
              
              <button class="btn-primary btn-large" id="registerNodeBtn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M12 5v14M5 12h14"></path>
                </svg>
                Register Node
              </button>
            </div>
            
            <div class="provider-nodes-list">
              <h3 class="list-title">Your Registered Nodes</h3>
              <div id="providerNodesList" class="nodes-grid">
                <div class="empty-state">
                  <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#4A4A4A" stroke-width="1.5">
                    <rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect>
                    <rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect>
                    <line x1="6" y1="6" x2="6.01" y2="6"></line>
                    <line x1="6" y1="18" x2="6.01" y2="18"></line>
                  </svg>
                  <p>No nodes registered yet</p>
                  <small>Register your first node to start earning</small>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast"></div>

  <script src="renderer.js"></script>
</body>
</html>
